package com.example.shenghuobang.Setting;

import com.example.shenghuobang.R;

import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.CheckBoxPreference;
import android.preference.EditTextPreference;
import android.preference.ListPreference;
import android.preference.Preference;
import android.preference.PreferenceActivity;
import android.preference.PreferenceManager;
import android.preference.PreferenceScreen;
import android.util.Log;
import android.widget.Toast;

public class SettingActivity extends PreferenceActivity implements 
		Preference.OnPreferenceClickListener,
		Preference.OnPreferenceChangeListener {
	private static String TAG = "HelloPreference";          
	private CheckBoxPreference enable_sound; 
	private CheckBoxPreference enable_vibrate;
	private CheckBoxPreference enable_password;
	
	
	private EditTextPreference number_edit;      
	private Preference data_update;            
	private Preference version_update; 
	private Preference feedback; 

	public void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		addPreferencesFromResource(R.xml.mypreference);
		
		enable_sound = (CheckBoxPreference) findPreference("apply_enable_sound");
		enable_vibrate = (CheckBoxPreference) findPreference("apply_enable_vibrate");
		enable_password = (CheckBoxPreference) findPreference("apply_enable_password");
		number_edit = (EditTextPreference)findPreference("number_edit");
		data_update = (Preference) findPreference("data_update");
		version_update = (Preference) findPreference("version_update");
		feedback = (Preference) findPreference("feedback");
	}

	
	// 点击事件触发
	@Override
	public boolean onPreferenceClick(Preference preference) {
		
		Log.i(TAG, "onPreferenceClick----->"+String.valueOf(preference.getKey()));
		
		
		return false;
	}
   //点击事件触发
	public boolean onPreferenceTreeClick(PreferenceScreen preferenceScreen,
			Preference preference) {
		Log.i(TAG, "onPreferenceTreeClick----->"+preference.getKey());
		if(preference.getKey().equals("data_update")){
			Intent i = new Intent(SettingActivity.this, UpdateDataActivity.class);
			startActivity(i);
			return true;
		}else if (preference.getKey().equals("version_update")) {

			Intent i = new Intent(SettingActivity.this, UpdateVersionActivity.class);
			startActivity(i);
			return true;
		}else if(preference.getKey().equals("feedback")){
			
		}
		return false;
	}

	// 当Preference的值发生改变时触发该事件，true则以新值更新控件的状态，false则do noting
	public boolean onPreferenceChange(Preference preference, Object objValue) {
//		Log.i(TAG, "onPreferenceChange----->"+String.valueOf(preference.getKey()));
//		if (preference == mapply_wifiPreference){
//			Log.i(TAG, "Wifi CB, and isCheckd = " + String.valueOf(objValue));
//		}else if (preference.getKey().equals("apply_internet")) {
//			Log.i(TAG, "internet CB, and isCheckd = "+ String.valueOf(objValue));
//			return false;  //不保存该新值
////		}else if (preference == depart_valuePreference){
////			Log.i(TAG, "  Old Value"+ depart_valuePreference.getValue()+" NewDeptName"+objValue);
//		}else if (preference.getKey().equals("wifi_setting")) {
//			Log.i(TAG, "change" + String.valueOf(objValue));
//			version_update.setTitle("its turn me.");  //重新设置title
//		} else if (preference == number_editPreference) {
//			Log.i(TAG, "Old Value = " + String.valueOf(objValue));
//			return false; // 不保存更新值
//		}
		return true;  //保存更新后的值
	}
}
